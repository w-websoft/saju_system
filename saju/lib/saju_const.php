<?php
if (!defined('_GNUBOARD_')) exit;

/** 천간·지지·오행·음양·색상 */
$saju_const = [
  'gan' => [
    ['idx'=>0,'han'=>'甲','kr'=>'갑','elem'=>'木','yy'=>'陽','color'=>'#16a34a'],
    ['idx'=>1,'han'=>'乙','kr'=>'을','elem'=>'木','yy'=>'陰','color'=>'#16a34a'],
    ['idx'=>2,'han'=>'丙','kr'=>'병','elem'=>'火','yy'=>'陽','color'=>'#ef4444'],
    ['idx'=>3,'han'=>'丁','kr'=>'정','elem'=>'火','yy'=>'陰','color'=>'#ef4444'],
    ['idx'=>4,'han'=>'戊','kr'=>'무','elem'=>'土','yy'=>'陽','color'=>'#f59e0b'],
    ['idx'=>5,'han'=>'己','kr'=>'기','elem'=>'土','yy'=>'陰','color'=>'#f59e0b'],
    ['idx'=>6,'han'=>'庚','kr'=>'경','elem'=>'金','yy'=>'陽','color'=>'#9ca3af'],
    ['idx'=>7,'han'=>'辛','kr'=>'신','elem'=>'金','yy'=>'陰','color'=>'#9ca3af'],
    ['idx'=>8,'han'=>'壬','kr'=>'임','elem'=>'水','yy'=>'陽','color'=>'#0ea5e9'],
    ['idx'=>9,'han'=>'癸','kr'=>'계','elem'=>'水','yy'=>'陰','color'=>'#0ea5e9'],
  ],
  'zhi' => [
    ['idx'=>0,'han'=>'子','kr'=>'자','elem'=>'水','yy'=>'陽','clash'=>6],
    ['idx'=>1,'han'=>'丑','kr'=>'축','elem'=>'土','yy'=>'陰','clash'=>7],
    ['idx'=>2,'han'=>'寅','kr'=>'인','elem'=>'木','yy'=>'陽','clash'=>8],
    ['idx'=>3,'han'=>'卯','kr'=>'묘','elem'=>'木','yy'=>'陰','clash'=>9],
    ['idx'=>4,'han'=>'辰','kr'=>'진','elem'=>'土','yy'=>'陽','clash'=>10],
    ['idx'=>5,'han'=>'巳','kr'=>'사','elem'=>'火','yy'=>'陰','clash'=>11],
    ['idx'=>6,'han'=>'午','kr'=>'오','elem'=>'火','yy'=>'陽','clash'=>0],
    ['idx'=>7,'han'=>'未','kr'=>'미','elem'=>'土','yy'=>'陰','clash'=>1],
    ['idx'=>8,'han'=>'申','kr'=>'신','elem'=>'金','yy'=>'陽','clash'=>2],
    ['idx'=>9,'han'=>'酉','kr'=>'유','elem'=>'金','yy'=>'陰','clash'=>3],
    ['idx'=>10,'han'=>'戌','kr'=>'술','elem'=>'土','yy'=>'陽','clash'=>4],
    ['idx'=>11,'han'=>'亥','kr'=>'해','elem'=>'水','yy'=>'陰','clash'=>5],
  ],
  'sheng' => ['木'=>'火','火'=>'土','土'=>'金','金'=>'水','水'=>'木'],
  'ke'    => ['木'=>'土','土'=>'水','水'=>'火','火'=>'金','金'=>'木'],
];

/** 지장간 */
$saju_zhanggan = [
  0=>[9], 1=>[5,9,7], 2=>[0,2,4], 3=>[1], 4=>[4,1,9],
  5=>[3,5], 6=>[2], 7=>[5,1,7], 8=>[6,8,4], 9=>[7],
  10=>[4,6,1], 11=>[8,0]
];

/** 십신 판정 */
function saju_tengod($day_gan_idx, $gan_idx){
  global $saju_const;
  $gan = $saju_const['gan'];
  $dg_e = $gan[$day_gan_idx]['elem']; $dg_yy = $gan[$day_gan_idx]['yy'];
  $tg_e = $gan[$gan_idx]['elem'];     $tg_yy = $gan[$gan_idx]['yy'];

  if ($dg_e === $tg_e) return ($dg_yy === $tg_yy) ? '比肩' : '劫財';
  if ($saju_const['sheng'][$dg_e] === $tg_e) return ($dg_yy === $tg_yy) ? '食神' : '傷官';
  if ($saju_const['sheng'][$tg_e] === $dg_e) return ($dg_yy === $tg_yy) ? '偏印' : '正印';
  if ($saju_const['ke'][$dg_e] === $tg_e)     return ($dg_yy === $tg_yy) ? '偏財' : '正財';
  if ($saju_const['ke'][$tg_e] === $dg_e)     return ($dg_yy === $tg_yy) ? '偏官' : '正官';
  return '';
}

/** 12운성 */
$saju_12life = [
  0 => ['帝旺','衰','病','死','墓','絶','胎','養','長生','沐浴','冠帶','臨官'],
  1 => ['養','長生','沐浴','冠帶','臨官','帝旺','衰','病','死','墓','絶','胎'],
  2 => ['長生','沐浴','冠帶','臨官','帝旺','衰','病','死','墓','絶','胎','養'],
  3 => ['沐浴','冠帶','臨官','帝旺','衰','病','死','墓','絶','胎','養','長生'],
  4 => ['冠帶','臨官','帝旺','衰','病','死','墓','絶','胎','養','長生','沐浴'],
  5 => ['冠帶','臨官','帝旺','衰','病','死','墓','絶','胎','養','長生','沐浴'],
  6 => ['臨官','帝旺','衰','病','死','墓','絶','胎','養','長生','沐浴','冠帶'],
  7 => ['帝旺','衰','病','死','墓','絶','胎','養','長生','沐浴','冠帶','臨官'],
  8 => ['衰','病','死','墓','絶','胎','養','長生','沐浴','冠帶','臨官','帝旺'],
  9 => ['病','死','墓','絶','胎','養','長生','沐浴','冠帶','臨官','帝旺','衰'],
];

/** 12건법 */
$saju_dayofficer = [
  0=>['建','除','満','平','定','執','破','危','成','收','開','閉'],
  1=>['除','満','平','定','執','破','危','成','收','開','閉','建'],
  2=>['満','平','定','執','破','危','成','收','開','閉','建','除'],
  3=>['平','定','執','破','危','成','收','開','閉','建','除','満'],
  4=>['定','執','破','危','成','收','開','閉','建','除','満','平'],
  5=>['執','破','危','成','收','開','閉','建','除','満','平','定'],
  6=>['破','危','成','收','開','閉','建','除','満','平','定','執'],
  7=>['危','成','收','開','閉','建','除','満','平','定','執','破'],
  8=>['成','收','開','閉','建','除','満','平','定','執','破','危'],
  9=>['收','開','閉','建','除','満','平','定','執','破','危','成'],
 10=>['開','閉','建','除','満','平','定','執','破','危','成','收'],
 11=>['閉','建','除','満','平','定','執','破','危','成','收','開'],
];

/** 건제일 점수 */
$saju_dayofficer_score = [
  '開'=>+3,'成'=>+3,'定'=>+2,'除'=>+2,'満'=>+1,'收'=>+1,
  '平'=>0,'建'=>0,'執'=>-1,'危'=>-2,'破'=>-3,'閉'=>-3,
];

$saju_60 = [];
